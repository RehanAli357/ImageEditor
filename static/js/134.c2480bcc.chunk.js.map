{"version":3,"file":"static/js/134.c2480bcc.chunk.js","mappings":"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","sources":["Pages/ImagePage.jsx"],"sourcesContent":["import React, { useEffect, useState,useContext } from \"react\";\r\nimport { FabricJSCanvas, useFabricJSEditor } from \"fabricjs-react\";\r\nimport {useNavigate} from \"react-router-dom\"\r\nimport { fabric } from \"fabric\";\r\nimport LoginContext from \"../Context/LoginContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { ACCESS_KEY } from \"../apiKeys\";\r\nimport \"../Assets/Style/ImageCanva/imageCanva.css\";\r\nconst ImagePage = () => {\r\n  const [url, seturl] = useState(\"\");\r\n  const [layers,setlayers]=useState([]);\r\n  const {isLogin}=useContext(LoginContext);\r\n  const [cropImage, setCropImage] = useState(true);\r\n  const { editor, onReady } = useFabricJSEditor();\r\n  const history = [];\r\n  const params = useParams();\r\n  const navigate= useNavigate();\r\n  useEffect(() => {\r\n    const getImg = async () => {\r\n      const res = await fetch(\r\n        `https://api.unsplash.com/photos/${params.id}?&client_id=${ACCESS_KEY}`\r\n      );\r\n      const data = await res.json();\r\n      seturl(data.urls.full);\r\n    };\r\n    getImg();\r\n  }, [params]);\r\n  useEffect(() => {\r\n    if (!editor || !fabric) {\r\n      return;\r\n    }\r\n    if (cropImage) {\r\n      editor.canvas.__eventListeners = {};\r\n      return;\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:wheel\"]) {\r\n      editor.canvas.on(\"mouse:wheel\", function (opt) {\r\n        var delta = opt.e.deltaY;\r\n        var zoom = editor.canvas.getZoom();\r\n        zoom *= 0.999 ** delta;\r\n        if (zoom > 20) zoom = 20;\r\n        if (zoom < 0.01) zoom = 0.01;\r\n        editor.canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);\r\n        opt.e.preventDefault();\r\n        opt.e.stopPropagation();\r\n      });\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:down\"]) {\r\n      editor.canvas.on(\"mouse:down\", function (opt) {\r\n        var evt = opt.e;\r\n        if (evt.ctrlKey === true) {\r\n          this.isDragging = true;\r\n          this.selection = false;\r\n          this.lastPosX = evt.clientX;\r\n          this.lastPosY = evt.clientY;\r\n        }\r\n      });\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:move\"]) {\r\n      editor.canvas.on(\"mouse:move\", function (opt) {\r\n        if (this.isDragging) {\r\n          var e = opt.e;\r\n          var vpt = this.viewportTransform;\r\n          vpt[4] += e.clientX - this.lastPosX;\r\n          vpt[5] += e.clientY - this.lastPosY;\r\n          this.requestRenderAll();\r\n          this.lastPosX = e.clientX;\r\n          this.lastPosY = e.clientY;\r\n        }\r\n      });\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:up\"]) {\r\n      editor.canvas.on(\"mouse:up\", function (opt) {\r\n        // on mouse up we want to recalculate new interaction\r\n        // for all objects, so we call setViewportTransform\r\n        this.setViewportTransform(this.viewportTransform);\r\n        this.isDragging = false;\r\n        this.selection = true;\r\n      });\r\n    }\r\n    editor.canvas.renderAll();\r\n  }, [editor]);\r\n\r\n  const addBackground = () => {\r\n    if (!editor || !fabric) {\r\n      return;\r\n    }\r\n    fabric.Image.fromURL(url, (image) => {\r\n      image.scaleToWidth(editor.canvas.width);\r\n      editor.canvas.setBackgroundImage(\r\n        image,\r\n        editor.canvas.renderAll.bind(editor.canvas)\r\n      );\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    if (!editor || !fabric) {\r\n      return;\r\n    }\r\n    editor.canvas.setHeight(500);\r\n    editor.canvas.setWidth(500);\r\n    addBackground();\r\n    editor.canvas.renderAll();\r\n    setlayers((pdata)=>{\r\n      return [...pdata,\"image\"]\r\n    })\r\n    \r\n  }, [editor?.canvas.backgroundImage]);\r\n\r\n  const clear = () => {\r\n    editor.canvas._objects.splice(0, editor.canvas._objects.length);\r\n    history.splice(0, history.length);\r\n    editor.canvas.renderAll();\r\n    setlayers((pdata)=>{\r\n      return pdata.slice(0,layers.length-1);\r\n    })\r\n  };\r\n  const removeSelectedObject = () => {\r\n    editor.canvas.remove(editor.canvas.getActiveObject());\r\n  };\r\n  const addText = () => {\r\n    editor.addText(\"inset text\");\r\n    setlayers((pdata)=>{\r\n      return [...pdata,\"text\"]\r\n    })\r\n  };\r\n  const onAddCircle = () => {\r\n    editor.addCircle();\r\n    setlayers((pdata)=>{\r\n      return [...pdata,\"shape-circle\"]\r\n    })\r\n  };\r\n  const onAddRectangle = () => {\r\n    editor.addRectangle();\r\n    setlayers((pdata)=>{\r\n      return [...pdata,\"shape-rectangle\"]\r\n    })\r\n  };\r\n  const exportSVG = () => {\r\n     const svg = editor.canvas;\r\n     console.info(svg);\r\n\r\n  };\r\n  useEffect(()=>{\r\n    if (isLogin===false) {\r\n      navigate(\"/Login\");\r\n      alert(\"Kindly Login\")\r\n    }\r\n  },[isLogin])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"ImageCanva\">\r\n        <h1>Add Image Caption</h1>\r\n        <div className=\"ImgCanvaCard FC\">\r\n          <div className=\"ImgCanvaCardPic\">\r\n            <FabricJSCanvas className=\"canvas\" id=\"cv\" onReady={onReady} />\r\n          </div>\r\n          <div className=\"CanvasOption\">\r\n            <button onClick={addText} disabled={!cropImage}>\r\n              Add Text\r\n            </button>\r\n            <button onClick={onAddCircle}>Add circle</button>\r\n            <button onClick={onAddRectangle} disabled={!cropImage}>\r\n              Add Rectangle\r\n            </button>\r\n\r\n            <button onClick={clear} disabled={!cropImage}>\r\n              Clear\r\n            </button>\r\n            <button onClick={removeSelectedObject} disabled={!cropImage}>\r\n              Delete\r\n            </button>\r\n\r\n            <button onClick={exportSVG} disabled={!cropImage}>\r\n              {\" \"}\r\n              ToSVG\r\n            </button>\r\n            <button onClick={()=>{console.log(layers);}}> ShowLayers</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ImagePage;\r\n"],"names":["_useState","useState","_useState2","_slicedToArray","url","seturl","_useState3","_useState4","layers","setlayers","isLogin","useContext","LoginContext","_useState5","_useState6","cropImage","_useFabricJSEditor","useFabricJSEditor","editor","onReady","history","params","useParams","navigate","useNavigate","useEffect","getImg","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_context","prev","next","fetch","concat","id","ACCESS_KEY","sent","json","urls","full","stop","apply","arguments","fabric","canvas","__eventListeners","on","opt","delta","e","deltaY","zoom","getZoom","Math","pow","zoomToPoint","x","offsetX","y","offsetY","preventDefault","stopPropagation","evt","ctrlKey","this","isDragging","selection","lastPosX","clientX","lastPosY","clientY","vpt","viewportTransform","requestRenderAll","setViewportTransform","renderAll","setHeight","setWidth","Image","fromURL","image","scaleToWidth","width","setBackgroundImage","bind","pdata","_toConsumableArray","backgroundImage","alert","_jsx","React","children","_jsxs","className","FabricJSCanvas","onClick","addText","disabled","addCircle","addRectangle","_objects","splice","length","slice","remove","getActiveObject","svg","console","info","log"],"sourceRoot":""}