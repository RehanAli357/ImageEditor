{"version":3,"file":"static/js/134.dc492b7e.chunk.js","mappings":"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","sources":["Pages/ImagePage.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { FabricJSCanvas, useFabricJSEditor } from \"fabricjs-react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { fabric } from \"fabric\";\r\nimport LoginContext from \"../Context/LoginContext\";\r\nimport { ACCESS_KEY } from \"../apiKeys\";\r\nimport \"../Assets/Style/ImageCanva/imageCanva.css\";\r\nconst ImagePage = () => {\r\n  const [url, seturl] = useState(\"\");\r\n  const [layers, setlayers] = useState([]);\r\n  const [tempcaption, setTempCaption] = useState(\"\");\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [isloading, setisLoading] = useState(true);\r\n  const [isdisplay, setisDisplay] = useState(\"flex\");\r\n  const { isLogin } = useContext(LoginContext);\r\n  const [cropImage] = useState(true);\r\n  const { editor, onReady } = useFabricJSEditor();\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  console.log();\r\n  useEffect(() => {\r\n    const getImg = async () => {\r\n      try {\r\n        if (isloading) {\r\n          setisDisplay(\"inline-block\");\r\n        }\r\n        const res = await fetch(\r\n          `https://api.unsplash.com/photos/${params.id}?&client_id=${ACCESS_KEY}`\r\n        );\r\n        const data = await res.json();\r\n        seturl(data.urls.full);\r\n      } catch (error) {\r\n        alert(\"Unable To Fetch Data\");\r\n        navigate(-1);\r\n      } finally {\r\n        setisLoading(false);\r\n        setisDisplay(\"none\");\r\n      }\r\n    };\r\n    getImg();\r\n  }, [params, navigate]);\r\n  useEffect(() => {\r\n    if (!editor || !fabric) {\r\n      return;\r\n    }\r\n    if (cropImage) {\r\n      editor.canvas.__eventListeners = {};\r\n      return;\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:wheel\"]) {\r\n      editor.canvas.on(\"mouse:wheel\", function (opt) {\r\n        var delta = opt.e.deltaY;\r\n        var zoom = editor.canvas.getZoom();\r\n        zoom *= 0.999 ** delta;\r\n        if (zoom > 20) zoom = 20;\r\n        if (zoom < 0.01) zoom = 0.01;\r\n        editor.canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);\r\n        opt.e.preventDefault();\r\n        opt.e.stopPropagation();\r\n      });\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:down\"]) {\r\n      editor.canvas.on(\"mouse:down\", function (opt) {\r\n        var evt = opt.e;\r\n        if (evt.ctrlKey === true) {\r\n          this.isDragging = true;\r\n          this.selection = false;\r\n          this.lastPosX = evt.clientX;\r\n          this.lastPosY = evt.clientY;\r\n        }\r\n      });\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:move\"]) {\r\n      editor.canvas.on(\"mouse:move\", function (opt) {\r\n        if (this.isDragging) {\r\n          var e = opt.e;\r\n          var vpt = this.viewportTransform;\r\n          vpt[4] += e.clientX - this.lastPosX;\r\n          vpt[5] += e.clientY - this.lastPosY;\r\n          this.requestRenderAll();\r\n          this.lastPosX = e.clientX;\r\n          this.lastPosY = e.clientY;\r\n        }\r\n      });\r\n    }\r\n    if (!editor.canvas.__eventListeners[\"mouse:up\"]) {\r\n      editor.canvas.on(\"mouse:up\", function () {\r\n        this.setViewportTransform(this.viewportTransform);\r\n        this.isDragging = false;\r\n        this.selection = true;\r\n      });\r\n    }\r\n    editor.canvas.renderAll();\r\n  }, [editor, cropImage]);\r\n\r\n  const addBackground = () => {\r\n    if (!editor || !fabric) {\r\n      return;\r\n    }\r\n    fabric.Image.fromURL(url, (image) => {\r\n      image.scaleToWidth(editor.canvas.width);\r\n      editor.canvas.setBackgroundImage(\r\n        image,\r\n        editor.canvas.renderAll.bind(editor.canvas)\r\n      );\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    if (!editor || !fabric) {\r\n      return;\r\n    }\r\n    editor.canvas.setHeight(500);\r\n    editor.canvas.setWidth(500);\r\n    addBackground();\r\n    editor.canvas.renderAll();\r\n  }, [editor?.canvas.backgroundImage]);\r\n\r\n  const exportSVG = () => {\r\n    try {\r\n      const svg = editor.canvas.toSVG();\r\n      const blob = new Blob([svg], { type: \"image/svg+xml;charset=utf-8\" });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement(\"a\");\r\n      link.href = url;\r\n      link.download = \"image.svg\";\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (isLogin === false) {\r\n      navigate(\"/Login\");\r\n      alert(\"Kindly Login\");\r\n    } else {\r\n      setlayers((pdata) => {\r\n        return [...pdata, \"image\"];\r\n      });\r\n    }\r\n  }, [isLogin, navigate]);\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"ImageCanva\">\r\n        <h1>Add Image Caption</h1>\r\n        <div className=\"ImgCanvaCard \">\r\n          <div className=\"ImgCanvaCardPic\">\r\n            {isloading ? (\r\n              <React.Fragment>\r\n                <div className=\"lds-circle\" style={{ display: { isdisplay } }}>\r\n                  <div></div>\r\n                </div>\r\n              </React.Fragment>\r\n            ) : (\r\n              <React.Fragment>\r\n                <FabricJSCanvas className=\"canvas\" id=\"cv\" onReady={onReady} />\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n          <div className=\"CanvasOption\">\r\n            <div className=\"CaptionTag\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Add Caption\"\r\n                value={tempcaption}\r\n                onChange={(e) => {\r\n                  setTempCaption(e.target.value);\r\n                  setCaption(e.target.value);\r\n                }}\r\n              />\r\n              <button\r\n                onClick={() => {\r\n                  import(\"./Functions/AddText/addText\").then((data) =>\r\n                    data.addText(\r\n                      setCaption,\r\n                      caption,\r\n                      editor,\r\n                      setTempCaption,\r\n                      tempcaption,\r\n                      setlayers\r\n                    )\r\n                  );\r\n                }}\r\n                disabled={!cropImage}\r\n              >\r\n                Add Caption\r\n              </button>\r\n            </div>\r\n\r\n            <button\r\n              name=\"circle\"\r\n              onClick={() => {\r\n                import(\"./Functions/AddShapes/AddShapes\").then((data) =>\r\n                  data.addCircle(editor, setlayers)\r\n                );\r\n              }}\r\n            >\r\n              Add circle\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/AddShapes/AddShapes\").then((data) =>\r\n                  data.addTriangle(editor, setlayers)\r\n                );\r\n              }}\r\n            >\r\n              Add Triangle\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/AddShapes/AddShapes\").then((data) =>\r\n                  data.addRect(editor, setlayers)\r\n                );\r\n              }}\r\n            >\r\n              Add Rectangle\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/AddShapes/AddShapes\").then((data) =>\r\n                  data.addPolygon(editor, setlayers)\r\n                );\r\n              }}\r\n            >\r\n              Add Polygon\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/RemoveLayer/removeLayer\").then((data) =>\r\n                  data.removeAll(editor, setlayers, setCaption)\r\n                );\r\n              }}\r\n              disabled={!cropImage}\r\n            >\r\n              Clear\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/RemoveLayer/removeLayer\").then((data) =>\r\n                  data.removeSelectedObj(editor)\r\n                );\r\n              }}\r\n              disabled={!cropImage}\r\n            >\r\n              Delete\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/SaveCanvas/saveCanvas\").then((data) =>\r\n                  data.exportSVG(editor)\r\n                );\r\n              }}\r\n              id=\"dwnld\"\r\n              disabled={!cropImage}\r\n            >\r\n              {\" \"}\r\n              ToSVG\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                import(\"./Functions/ShowLayers/showLayers\").then((data) =>\r\n                  data.showLayers(layers)\r\n                );\r\n              }}\r\n            >\r\n              {\" \"}\r\n              ShowLayers\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ImagePage;\r\n"],"names":["_useState","useState","_useState2","_slicedToArray","url","seturl","_useState3","_useState4","layers","setlayers","_useState5","_useState6","tempcaption","setTempCaption","_useState7","_useState8","caption","setCaption","_useState9","_useState10","isloading","setisLoading","_useState11","_useState12","isdisplay","setisDisplay","isLogin","useContext","LoginContext","_useState13","cropImage","_useFabricJSEditor","useFabricJSEditor","editor","onReady","params","useParams","navigate","useNavigate","console","log","useEffect","getImg","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_context","prev","next","fetch","concat","id","ACCESS_KEY","sent","json","urls","full","t0","alert","finish","stop","apply","arguments","fabric","canvas","__eventListeners","on","opt","delta","e","deltaY","zoom","getZoom","Math","pow","zoomToPoint","x","offsetX","y","offsetY","preventDefault","stopPropagation","evt","ctrlKey","this","isDragging","selection","lastPosX","clientX","lastPosY","clientY","vpt","viewportTransform","requestRenderAll","setViewportTransform","renderAll","setHeight","setWidth","Image","fromURL","image","scaleToWidth","width","setBackgroundImage","bind","backgroundImage","pdata","_toConsumableArray","_jsx","React","children","_jsxs","className","style","display","FabricJSCanvas","type","placeholder","value","onChange","target","onClick","then","addText","disabled","name","addCircle","addTriangle","addRect","addPolygon","removeAll","removeSelectedObj","exportSVG","showLayers"],"sourceRoot":""}