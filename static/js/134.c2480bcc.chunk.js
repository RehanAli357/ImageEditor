(self.webpackChunkimage_editor=self.webpackChunkimage_editor||[]).push([[134],{1714:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return h}});var s=t(3433),a=t(4165),c=t(5861),i=t(9439),o=t(2791),r=t(6882),l=t(7689),u=t(3050),d=t(1313),f=t(6934),v=t(184),h=function(){var n=(0,o.useState)(""),e=(0,i.Z)(n,2),t=e[0],h=e[1],g=(0,o.useState)([]),m=(0,i.Z)(g,2),p=m[0],b=m[1],x=(0,o.useContext)(d.Z).isLogin,C=(0,o.useState)(!0),j=(0,i.Z)(C,2),_=j[0],k=(j[1],(0,r.f)()),w=k.editor,Z=k.onReady,A=[],L=(0,l.UO)(),P=(0,l.s0)();(0,o.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,a.Z)().mark((function n(){var e,t;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.unsplash.com/photos/".concat(L.id,"?&client_id=").concat(f.R));case 2:return e=n.sent,n.next=5,e.json();case 5:t=n.sent,h(t.urls.full);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[L]),(0,o.useEffect)((function(){w&&u.fabric&&(_?w.canvas.__eventListeners={}:(w.canvas.__eventListeners["mouse:wheel"]||w.canvas.on("mouse:wheel",(function(n){var e=n.e.deltaY,t=w.canvas.getZoom();(t*=Math.pow(.999,e))>20&&(t=20),t<.01&&(t=.01),w.canvas.zoomToPoint({x:n.e.offsetX,y:n.e.offsetY},t),n.e.preventDefault(),n.e.stopPropagation()})),w.canvas.__eventListeners["mouse:down"]||w.canvas.on("mouse:down",(function(n){var e=n.e;!0===e.ctrlKey&&(this.isDragging=!0,this.selection=!1,this.lastPosX=e.clientX,this.lastPosY=e.clientY)})),w.canvas.__eventListeners["mouse:move"]||w.canvas.on("mouse:move",(function(n){if(this.isDragging){var e=n.e,t=this.viewportTransform;t[4]+=e.clientX-this.lastPosX,t[5]+=e.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=e.clientX,this.lastPosY=e.clientY}})),w.canvas.__eventListeners["mouse:up"]||w.canvas.on("mouse:up",(function(n){this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0})),w.canvas.renderAll()))}),[w]);(0,o.useEffect)((function(){w&&u.fabric&&(w.canvas.setHeight(500),w.canvas.setWidth(500),w&&u.fabric&&u.fabric.Image.fromURL(t,(function(n){n.scaleToWidth(w.canvas.width),w.canvas.setBackgroundImage(n,w.canvas.renderAll.bind(w.canvas))})),w.canvas.renderAll(),b((function(n){return[].concat((0,s.Z)(n),["image"])})))}),[null===w||void 0===w?void 0:w.canvas.backgroundImage]);return(0,o.useEffect)((function(){!1===x&&(P("/Login"),alert("Kindly Login"))}),[x]),(0,v.jsx)(o.Fragment,{children:(0,v.jsxs)("div",{className:"ImageCanva",children:[(0,v.jsx)("h1",{children:"Add Image Caption"}),(0,v.jsxs)("div",{className:"ImgCanvaCard FC",children:[(0,v.jsx)("div",{className:"ImgCanvaCardPic",children:(0,v.jsx)(r.O,{className:"canvas",id:"cv",onReady:Z})}),(0,v.jsxs)("div",{className:"CanvasOption",children:[(0,v.jsx)("button",{onClick:function(){w.addText("inset text"),b((function(n){return[].concat((0,s.Z)(n),["text"])}))},disabled:!_,children:"Add Text"}),(0,v.jsx)("button",{onClick:function(){w.addCircle(),b((function(n){return[].concat((0,s.Z)(n),["shape-circle"])}))},children:"Add circle"}),(0,v.jsx)("button",{onClick:function(){w.addRectangle(),b((function(n){return[].concat((0,s.Z)(n),["shape-rectangle"])}))},disabled:!_,children:"Add Rectangle"}),(0,v.jsx)("button",{onClick:function(){w.canvas._objects.splice(0,w.canvas._objects.length),A.splice(0,A.length),w.canvas.renderAll(),b((function(n){return n.slice(0,p.length-1)}))},disabled:!_,children:"Clear"}),(0,v.jsx)("button",{onClick:function(){w.canvas.remove(w.canvas.getActiveObject())},disabled:!_,children:"Delete"}),(0,v.jsxs)("button",{onClick:function(){var n=w.canvas;console.info(n)},disabled:!_,children:[" ","ToSVG"]}),(0,v.jsx)("button",{onClick:function(){console.log(p)},children:" ShowLayers"})]})]})]})})}},4960:function(){},6759:function(){},6272:function(){}}]);
//# sourceMappingURL=134.c2480bcc.chunk.js.map